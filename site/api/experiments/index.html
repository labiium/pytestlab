<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Scientific test & measurement toolbox for Python.">
    <meta name="author" content="LABIIUM">
    <meta name="robots" content="index, follow">

    <!-- Favicon -->
    <link rel="icon" href="../../img/favicon.ico" type="image/x-icon">

    <title>Experiments & Database - PyTestLab</title>

    <!-- CSS -->
    <link rel="stylesheet" href="../../css/theme.css">

    <!-- Prism.js CSS for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">

    <!-- Search styles -->
    <style>
        .search-container {
            position: relative;
            margin-right: 1rem;
        }

        .md-search {
            position: relative;
        }

        .md-search__inner {
            width: 100%;
        }

        .md-search__form {
            position: relative;
            display: flex;
            align-items: center;
            padding: 0 0.5rem;
            height: 2.4rem;
            width: 16rem;
        }

        .md-search__input {
            flex-grow: 1;
            height: 100%;
            background: transparent;
            border: none;
            outline: none;
            padding: 0 0.5rem;
        }

        .md-search__icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 1.8rem;
            height: 1.8rem;
            cursor: pointer;
        }

        .md-search__icon svg {
            width: 1.2rem;
            height: 1.2rem;
        }

        .md-search-result {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            width: 24rem;
            max-height: 75vh;
            overflow-y: auto;
            margin-top: 0.5rem;
            z-index: 100;
        }
    </style>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&family=Manrope:wght@800&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- Extra head content from plugins -->
    
</head>
<body>
    <div id="background-beams"></div>

    <div class="layout">
        <!-- Header / Navigation -->
        <header class="site-header">
            <div class="container">
                <div class="header-content">
                    <div class="logo-container">
                        <a href="../.." class="site-logo">
                            <img src="../../img/pytestlab_logo.png" alt="PyTestLab Logo">
                            <span class="site-name">PyTestLab</span>
                        </a>
                    </div>

                    <nav class="nav-primary">
                        <button class="mobile-nav-toggle" aria-label="Toggle navigation">
                            <span class="line"></span>
                            <span class="line"></span>
                            <span class="line"></span>
                        </button>

                        <ul class="nav-links">
                            
                                
                            
                                
                                    
                                        <li class="nav-item dropdown ">
                                            <a href="#" class="dropdown-toggle">Docs</a>
                                            <ul class="dropdown-menu glass-card">
                                                
                                                    <li class="">
                                                        <a href="../../installation/">Installation</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../user_guide/getting_started/">Getting Started</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../user_guide/async_vs_sync/">Async vs. Sync</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../user_guide/connecting/">Connecting to Instruments</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../user_guide/simulation/">Simulation Mode</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../user_guide/bench_descriptors/">Bench Descriptors</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../user_guide/errors/">Error Handling</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../user_guide/uncertainty/">Handling Uncertainty</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../user_guide/cli/">Command-Line Interface</a>
                                                    </li>
                                                
                                            </ul>
                                        </li>
                                    
                                
                            
                                
                                    
                                        <li class="nav-item dropdown ">
                                            <a href="#" class="dropdown-toggle">Tutorials</a>
                                            <ul class="dropdown-menu glass-card">
                                                
                                                    <li class="">
                                                        <a href="../../../tutorials/10_minute_tour.ipynb">10 Minute Tour</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../../tutorials/compliance.ipynb">Compliance and Audit</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../../tutorials/custom_validations.ipynb">Custom Validations</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../../tutorials/profile_creation.ipynb">Profile Creation</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../../tutorials/smartbench.ipynb">SmartBench Example</a>
                                                    </li>
                                                
                                            </ul>
                                        </li>
                                    
                                
                            
                                
                                    
                                        <li class="nav-item dropdown active">
                                            <a href="#" class="dropdown-toggle">API</a>
                                            <ul class="dropdown-menu glass-card">
                                                
                                                    <li class="">
                                                        <a href="../instruments/">Instruments</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../measurements/">Measurements</a>
                                                    </li>
                                                
                                                    <li class="active">
                                                        <a href="./">Experiments & Database</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../backends/">Backends</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../config/">Configuration</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../errors/">Errors</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../common/">Common Utilities</a>
                                                    </li>
                                                
                                            </ul>
                                        </li>
                                    
                                
                            
                                
                                    
                                        <li class="nav-item dropdown ">
                                            <a href="#" class="dropdown-toggle">Instruments</a>
                                            <ul class="dropdown-menu glass-card">
                                                
                                                    <li class="">
                                                        <a href="../../profiles/gallery/">Profile Gallery</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../profiles/creating/">Creating Profiles</a>
                                                    </li>
                                                
                                            </ul>
                                        </li>
                                    
                                
                            
                                
                                    
                                        <li class="nav-item dropdown ">
                                            <a href="#" class="dropdown-toggle">Community</a>
                                            <ul class="dropdown-menu glass-card">
                                                
                                                    <li class="">
                                                        <a href="../../contributing/">Contributing</a>
                                                    </li>
                                                
                                                    <li class="">
                                                        <a href="../../changelog/">Changelog</a>
                                                    </li>
                                                
                                            </ul>
                                        </li>
                                    
                                
                            
                        </ul>
                    </nav>

                    <div class="header-actions">
                        <!-- Search component -->
                        <div class="search-container">
                            <button class="search-button" id="searchButton" aria-label="Open Search">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                            </button>
                        </div>

                        <!-- Search Modal -->
                        <div class="search-modal" id="searchModal">
                            <div class="search-modal-content">
                                <form class="search-form">
                                    <input type="text" class="search-input" id="searchInput" placeholder="Search documentation..." autofocus>
                                    <button type="button" class="search-close" id="searchClose">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <line x1="18" y1="6" x2="6" y2="18"></line>
                                            <line x1="6" y1="6" x2="18" y2="18"></line>
                                        </svg>
                                    </button>
                                </form>
                                <div class="search-results">
                                    <div class="search-results-meta" id="searchResultsMeta">Type to start searching</div>
                                    <div id="searchResults"></div>
                                </div>
                            </div>
                        </div>

                        
                        <a href="https://github.com/pytestlab/pytestlab" target="_blank" class="beam-button beam-button-sm">
                            <span class="beam-button-text">GitHub</span>
                        </a>
                        
                    </div>
                </div>
            </div>
        </header>

        <!-- Page Content -->
        <main class="main-content">
            <div class="container">
                <div class="content-layout">
                    <!-- Sidebar / Table of Contents -->
                    
                    <aside class="sidebar">
                        <div class="glass-card toc-container">
                            <div class="toc-header">
                                <h4>Contents</h4>
                            </div>
                            
                                <ul class="toc">
                                    
                                        <li class="toc-item level-1">
                                            <a href="#experiments-sweeps">Experiments &amp; Sweeps</a>
                                            
                                                <ul>
                                                    
                                                        <li class="toc-item level-2">
                                                            <a href="#database-results">Database &amp; Results</a>
                                                        </li>
                                                    
                                                        <li class="toc-item level-2">
                                                            <a href="#pytestlab.experiments.database.Database">Database</a>
                                                        </li>
                                                    
                                                        <li class="toc-item level-2">
                                                            <a href="#pytestlab.experiments.results.MeasurementResult">MeasurementResult</a>
                                                        </li>
                                                    
                                                        <li class="toc-item level-2">
                                                            <a href="#experiments-sweeps_1">Experiments &amp; Sweeps</a>
                                                        </li>
                                                    
                                                        <li class="toc-item level-2">
                                                            <a href="#pytestlab.experiments.experiments.Experiment">Experiment</a>
                                                        </li>
                                                    
                                                        <li class="toc-item level-2">
                                                            <a href="#pytestlab.experiments.sweep">sweep</a>
                                                        </li>
                                                    
                                                </ul>
                                            
                                        </li>
                                    
                                </ul>
                            
                        </div>
                    </aside>
                    

                    <!-- Main Content Area -->
                    <div class="page-content glass-card">
                        <div class="article">
                            
                            <h1 class="page-title">Experiments & Database</h1>
                            
                            

                            
                                <h1 id="experiments-sweeps">Experiments &amp; Sweeps</h1>
<p>This section documents the core classes and utilities for managing experiments, sweeps, and measurement results in PyTestLab.</p>
<hr />
<h2 id="database-results">Database &amp; Results</h2>


<div class="doc doc-object doc-attribute">



<h2 id="pytestlab.experiments.database.Database" class="doc doc-heading">
            <code class="highlight language-python">pytestlab.experiments.database.Database = MeasurementDatabase</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pytestlab.experiments.results.MeasurementResult" class="doc doc-heading">
              <code class="highlight language-python">pytestlab.experiments.results.MeasurementResult(values, instrument, units, measurement_type, timestamp=None, envelope=None, sampling_rate=None, **kwargs)</code>

</h2>


    <div class="doc doc-contents first">


        <p>A class to represent a collection of measurement values.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="values = values

  
      instance-attribute
   (pytestlab.experiments.results.MeasurementResult.values)" href="#pytestlab.experiments.results.MeasurementResult.values">values</a></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The measurement data.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="numpy.ndarray">ndarray</span>, <span title="polars.DataFrame">DataFrame</span>, <span title="numpy.float64">float64</span>, <span title="typing.List">List</span>[<span title="typing.Any">Any</span>], <span title="uncertainties.core.UFloat">UFloat</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="units = units

  
      instance-attribute
   (pytestlab.experiments.results.MeasurementResult.units)" href="#pytestlab.experiments.results.MeasurementResult.units">units</a></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The units of the measurements.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="instrument = instrument

  
      instance-attribute
   (pytestlab.experiments.results.MeasurementResult.instrument)" href="#pytestlab.experiments.results.MeasurementResult.instrument">instrument</a></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The name of the instrument used for the measurements.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="measurement_type = measurement_type

  
      instance-attribute
   (pytestlab.experiments.results.MeasurementResult.measurement_type)" href="#pytestlab.experiments.results.MeasurementResult.measurement_type">measurement_type</a></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The type of measurement.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="timestamp = timestamp if timestamp is not None else time.time()

  
      instance-attribute
   (pytestlab.experiments.results.MeasurementResult.timestamp)" href="#pytestlab.experiments.results.MeasurementResult.timestamp">timestamp</a></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Timestamp of when the result was created.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="float">float</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>







                  <details class="quote">
                    <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
                    <pre class="highlight"><code class="language-python">def __init__(self, values: Union[np.ndarray, pl.DataFrame, np.float64, TypingList[Any], UFloat],
             instrument: str,
             units: str,
             measurement_type: str,
             timestamp: Optional[float] = None, # Allow optional timestamp override
             envelope: Optional[Dict[str, Any]] = None, # Add envelope as an explicit argument
             sampling_rate: Optional[float] = None, # Add sampling_rate for FFT
             **kwargs: Any) -&gt; None: # Added **kwargs and type hint
    self.values: Union[np.ndarray, pl.DataFrame, np.float64, TypingList[Any], UFloat] = values
    self.units: str = units
    self.instrument: str = instrument
    self.measurement_type: str = measurement_type
    self.timestamp: float = timestamp if timestamp is not None else time.time()
    # Envelope logic: always provide an envelope attribute
    if envelope is not None:
        self.envelope = envelope
    else:
        # Default: minimal valid envelope (empty dict, or customize as needed)
        self.envelope = {}

    # Store sampling rate for FFT calculations
    self.sampling_rate = sampling_rate

    # Store any additional kwargs as attributes
    for key, value in kwargs.items():
        setattr(self, key, value)</code></pre>
                  </details>



  <div class="doc doc-children">





<h3 id="pytestlab.experiments.results.MeasurementResult-attributes">Attributes</h3>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.results.MeasurementResult.envelope" class="doc doc-heading">
            <code class="highlight language-python">envelope = envelope</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.results.MeasurementResult.instrument" class="doc doc-heading">
            <code class="highlight language-python">instrument = instrument</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.results.MeasurementResult.measurement_type" class="doc doc-heading">
            <code class="highlight language-python">measurement_type = measurement_type</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.results.MeasurementResult.nominal" class="doc doc-heading">
            <code class="highlight language-python">nominal</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.results.MeasurementResult.sampling_rate" class="doc doc-heading">
            <code class="highlight language-python">sampling_rate = sampling_rate</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.results.MeasurementResult.sigma" class="doc doc-heading">
            <code class="highlight language-python">sigma</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.results.MeasurementResult.timestamp" class="doc doc-heading">
            <code class="highlight language-python">timestamp = timestamp if timestamp is not None else time.time()</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.results.MeasurementResult.units" class="doc doc-heading">
            <code class="highlight language-python">units = units</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.results.MeasurementResult.values" class="doc doc-heading">
            <code class="highlight language-python">values = values</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<h3 id="pytestlab.experiments.results.MeasurementResult-functions">Functions</h3>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.__delitem__" class="doc doc-heading">
            <code class="highlight language-python">__delitem__(index)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Allows deleting an item from 'values' if it's a list or ndarray.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def __delitem__(self, index: int) -&gt; None:
    """Allows deleting an item from 'values' if it's a list or ndarray."""
    if isinstance(self.values, list):
        del self.values[index]
    elif isinstance(self.values, np.ndarray):
        self.values = np.delete(self.values, index, axis=0)
    else:
        raise TypeError(f"Deletion by index not supported for type {type(self.values)}")</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.__getitem__" class="doc doc-heading">
            <code class="highlight language-python">__getitem__(index)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Allows indexing into the 'values' attribute.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def __getitem__(self, index: int) -&gt; Any:
    """Allows indexing into the 'values' attribute."""
    if isinstance(self.values, (np.ndarray, list)):
        return self.values[index]
    elif isinstance(self.values, pl.DataFrame):
        return self.values[index] # Returns a row as a new DataFrame
    elif isinstance(self.values, (np.float64, UFloat)) and index == 0:
        return self.values
    raise IndexError(f"Index {index} not applicable for type {type(self.values)}")</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.__iter__" class="doc doc-heading">
            <code class="highlight language-python">__iter__()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Allows iteration over the 'values' attribute.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def __iter__(self) -&gt; Iterator[Any]:
    """Allows iteration over the 'values' attribute."""
    if isinstance(self.values, (np.ndarray, list)):
        return iter(self.values)
    elif isinstance(self.values, pl.DataFrame):
        return iter(self.values.iter_rows())
    elif isinstance(self.values, (np.float64, UFloat)):
        return iter([self.values])
    raise TypeError(f"Iteration not supported for type {type(self.values)}")</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.__len__" class="doc doc-heading">
            <code class="highlight language-python">__len__()</code>

</h4>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def __len__(self) -&gt; int:
    if isinstance(self.values, (np.ndarray, list)):
        return len(self.values)
    elif isinstance(self.values, (np.float64, UFloat)):
        return 1
    elif isinstance(self.values, pl.DataFrame):
        return self.values.height # Number of rows
    return 0 # Default for unknown types</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.__repr__" class="doc doc-heading">
            <code class="highlight language-python">__repr__()</code>

</h4>


    <div class="doc doc-contents ">

        <p>For backward compatibility with tests:
- 1D arrays return a newline-separated list of values with units (like <strong>str</strong>)
- Other types use a detailed representation</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def __repr__(self) -&gt; str:
    """
    For backward compatibility with tests:
    - 1D arrays return a newline-separated list of values with units (like __str__)
    - Other types use a detailed representation
    """
    if isinstance(self.values, np.ndarray) and self.values.ndim == 1:
        return '\n'.join([f"{val} {self.units}" for val in self.values])
    return (f"MeasurementResult(instrument='{self.instrument}', type='{self.measurement_type}', "
            f"units='{self.units}', values_type='{type(self.values).__name__}', timestamp={self.timestamp})")</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.__str__" class="doc doc-heading">
            <code class="highlight language-python">__str__()</code>

</h4>


    <div class="doc doc-contents ">

        <p>String representation of the measurement result.</p>
<p>For backward compatibility with tests, returns a newline-separated list for arrays.
For other types, uses a more descriptive representation.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def __str__(self) -&gt; str:
    """String representation of the measurement result.

    For backward compatibility with tests, returns a newline-separated list for arrays.
    For other types, uses a more descriptive representation.
    """
    if isinstance(self.values, UFloat):
        return f"{self.values} {self.units}"
    elif isinstance(self.values, np.float64):
        return f"{self.values} {self.units}"
    elif isinstance(self.values, pl.DataFrame):
        return str(self.values)
    elif isinstance(self.values, np.ndarray):
        # For numpy arrays, handle 1D arrays specially for backward compatibility
        if self.values.ndim == 1:
            return '\n'.join([f"{val} {self.units}" for val in self.values])
        # For multi-dimensional arrays, provide a concise representation
        return f"NumPy Array (shape: {self.values.shape}, dtype: {self.values.dtype}) {self.units}"
    elif isinstance(self.values, list):
        # For lists, special handling for backward compatibility
        if all(isinstance(x, (int, float)) for x in self.values):
            return '\n'.join([f"{val} {self.units}" for val in self.values])
        # For lists with mixed types or nested lists, show first few items if long
        if len(self.values) &gt; 5:
            return f"List (first 5 of {len(self.values)}): {self.values[:5]}... {self.units}"
        return f"List: {self.values} {self.units}"

    # Fallback for other types
    return f"Values: {str(self.values)[:100]}... Type: {type(self.values)} {self.units}"</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.add" class="doc doc-heading">
            <code class="highlight language-python">add(value)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Adds a new value to the collection. Behavior depends on self.values type.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def add(self, value: Any) -&gt; None:
    """Adds a new value to the collection. Behavior depends on self.values type."""
    if isinstance(self.values, np.ndarray):
        # This might be inefficient for frequent additions. Consider list then convert.
        self.values = np.append(self.values, value)
    elif isinstance(self.values, list):
        self.values.append(value)
    elif isinstance(self.values, np.float64):
        # Convert to list or ndarray if adding to a single float
        self.values = np.array([self.values, value]) # type: ignore
        print("Warning: Added value to np.float64, converted 'values' to np.ndarray.")
    elif isinstance(self.values, UFloat):
        # If current value is UFloat, adding another value implies creating a list/array of UFloats
        self.values = [self.values, value] # type: ignore
        print("Warning: Added value to UFloat, converted 'values' to a list. Consider using a list of UFloats initially.")
    elif isinstance(self.values, pl.DataFrame):
        # Appending to Polars DataFrame is complex; typically done by creating a new DF and vstacking.
        # This simple 'add' might not be suitable.
        raise NotImplementedError("Direct 'add' to Polars DataFrame not supported. Use 'set_values' or manage DataFrame externally.")
    else:
        raise TypeError(f"Cannot 'add' to type {type(self.values)}")</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.clear" class="doc doc-heading">
            <code class="highlight language-python">clear()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Clears all the MeasurementValues from the collection, resetting to an empty/default state.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def clear(self) -&gt; None:
    """Clears all the MeasurementValues from the collection, resetting to an empty/default state."""
    if isinstance(self.values, np.ndarray):
        self.values = np.array([])
    elif isinstance(self.values, (np.float64, UFloat)): # Reset UFloat to a default float or ufloat(0,0)
        self.values = np.float64(0.0) # Or ufloat(0,0) if preferred default for UFloat
    elif isinstance(self.values, pl.DataFrame):
        self.values = pl.DataFrame()
    elif isinstance(self.values, list):
        self.values = []
    else: # Fallback for unknown types, attempt to set to a default float64
        print(f"Warning: Clearing unknown type {type(self.values)}, setting to np.float64(0.0).")
        self.values = np.float64(0.0)</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.get" class="doc doc-heading">
            <code class="highlight language-python">get(index)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Gets the MeasurementValue at a specified index. Assumes indexable values.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def get(self, index: int) -&gt; Any:
    """Gets the MeasurementValue at a specified index. Assumes indexable values."""
    if isinstance(self.values, (np.ndarray, list)):
        return self.values[index]
    elif isinstance(self.values, pl.DataFrame):
        # For DataFrame, 'get' by index might mean row.
        # This returns a new DataFrame with one row.
        return self.values[index]
    elif isinstance(self.values, (np.float64, UFloat)) and index == 0:
        return self.values
    raise IndexError(f"Index {index} out of range or type {type(self.values)} not directly indexable by single int.")</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.get_all" class="doc doc-heading">
            <code class="highlight language-python">get_all()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Returns all the MeasurementValues in the collection.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def get_all(self) -&gt; Union[np.ndarray, pl.DataFrame, np.float64, TypingList[Any], UFloat]:
    """Returns all the MeasurementValues in the collection."""
    return self.values</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.items" class="doc doc-heading">
            <code class="highlight language-python">items()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Return items for dict-like behavior.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def items(self):
    """Return items for dict-like behavior."""
    return self.to_dict().items()</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.keys" class="doc doc-heading">
            <code class="highlight language-python">keys()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Return the keys for dict-like behavior.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def keys(self):
    """Return the keys for dict-like behavior."""
    return self.to_dict().keys()</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.perform_fft" class="doc doc-heading">
            <code class="highlight language-python">perform_fft()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Perform Fast Fourier Transform on the measurement data.</p>
<p>Requires:
- self.values to be a numpy array of time-domain data
- self.sampling_rate to be set (in Hz)</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>&#39;MeasurementResult&#39;</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A new MeasurementResult containing the FFT data, with frequency in Hz</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>&#39;MeasurementResult&#39;</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>and magnitude in the same units as the original data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def perform_fft(self) -&gt; 'MeasurementResult':
    """Perform Fast Fourier Transform on the measurement data.

    Requires:
    - self.values to be a numpy array of time-domain data
    - self.sampling_rate to be set (in Hz)

    Returns:
        A new MeasurementResult containing the FFT data, with frequency in Hz
        and magnitude in the same units as the original data.
    """
    if self.sampling_rate is None:
        raise ValueError("Sampling rate must be set to perform FFT")

    if not isinstance(self.values, np.ndarray):
        raise TypeError(f"FFT requires numpy array, got {type(self.values)}")

    # Ensure we're working with a 1D array
    values = self.values.flatten() if self.values.ndim &gt; 1 else self.values

    # Perform FFT
    fft_values = np.fft.rfft(values)
    fft_magnitude = np.abs(fft_values)

    # Create frequency axis
    freqs = np.fft.rfftfreq(len(values), 1/self.sampling_rate)

    # Create result with frequency and magnitude
    result_df = pl.DataFrame({
        "frequency": freqs,
        "magnitude": fft_magnitude
    })

    return MeasurementResult(
        values=result_df,
        instrument=self.instrument,
        units=self.units,
        measurement_type="FFT",
        timestamp=time.time(),
        original_type=self.measurement_type,
        sampling_rate=self.sampling_rate
    )</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.save" class="doc doc-heading">
            <code class="highlight language-python">save(path)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Saves the measurement data to a file.</p>
<p>If the data is a numpy array, it will be saved as a .npy file.
If the data is a Polars DataFrame, it will be saved as a .parquet file.
Other list-like data will be converted to numpy array and saved as .npy.
np.float64 will be saved as a 0-D numpy array.
UFloat objects will be saved as a two-element numpy array [nominal, std_dev] in a .npy file.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def save(self, path: str) -&gt; None:
    """Saves the measurement data to a file.

    If the data is a numpy array, it will be saved as a .npy file.
    If the data is a Polars DataFrame, it will be saved as a .parquet file.
    Other list-like data will be converted to numpy array and saved as .npy.
    np.float64 will be saved as a 0-D numpy array.
    UFloat objects will be saved as a two-element numpy array [nominal, std_dev] in a .npy file.
    """
    default_ext = ".npy"
    if isinstance(self.values, pl.DataFrame):
        default_ext = ".parquet"

    if not path.endswith(('.npy', '.parquet')):
        path += default_ext
        print(f"Warning: File extension not specified. Saving as {path}")

    if isinstance(self.values, np.ndarray):
        np.save(path, self.values)
    elif isinstance(self.values, pl.DataFrame):
        if not path.endswith(".parquet"):
            print(f"Warning: Saving Polars DataFrame to non-parquet file '{path}'. Consider using .parquet for DataFrames.")
        self.values.write_parquet(path)
    elif isinstance(self.values, UFloat):
        if not path.endswith(".npy"):
            print(f"Warning: Saving UFloat to non-npy file '{path}'. Consider using .npy.")
        np.save(path, np.array([self.values.nominal_value, self.values.std_dev]))
    elif isinstance(self.values, (list, np.float64)): # Convert list or float64 to ndarray
        if not path.endswith(".npy"):
            print(f"Warning: Saving {type(self.values).__name__} to non-npy file '{path}'. Consider using .npy.")
        np.save(path, np.array(self.values))
    else:
        raise TypeError(f"Unsupported data type for saving: {type(self.values)}. Can save np.ndarray, pl.DataFrame, list, np.float64, or UFloat.")
    print(f"Measurement saved to {path}")</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.set_values" class="doc doc-heading">
            <code class="highlight language-python">set_values(values)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Sets the MeasurementValues in the collection.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def set_values(self, values: Union[np.ndarray, pl.DataFrame, np.float64, TypingList[Any], UFloat]) -&gt; None:
    """Sets the MeasurementValues in the collection."""
    self.values = values</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.results.MeasurementResult.to_dict" class="doc doc-heading">
            <code class="highlight language-python">to_dict()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Convert MeasurementResult to a dict for DataFrame conversion.</p>
<p>This allows MeasurementResult objects to be directly used in Experiment.add_trial.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/results.py</code></summary>
              <pre class="highlight"><code class="language-python">def to_dict(self) -&gt; Dict[str, Any]:
    """Convert MeasurementResult to a dict for DataFrame conversion.

    This allows MeasurementResult objects to be directly used in Experiment.add_trial.
    """
    if isinstance(self.values, pl.DataFrame):
        # If values is already a DataFrame, convert to dict representation
        result = {}
        for col in self.values.columns:
            result[col] = self.values[col].to_list()
        return result
    elif isinstance(self.values, (np.ndarray, list)):
        # Convert array or list to a dict with a 'values' key
        return {'values': self.values}
    elif isinstance(self.values, (np.float64, UFloat)):
        # Convert scalar value to a dict with a 'value' key
        return {'value': self.values}
    else:
        # Default fallback
        return {'values': self.values}</code></pre>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />
<h2 id="experiments-sweeps_1">Experiments &amp; Sweeps</h2>


<div class="doc doc-object doc-class">



<h2 id="pytestlab.experiments.experiments.Experiment" class="doc doc-heading">
              <code class="highlight language-python">pytestlab.experiments.experiments.Experiment(name, description='', notes='')</code>

</h2>


    <div class="doc doc-contents first">


        <p>Experiment tracker to store measurements and parameters.</p>
<p>This class maintains an internal Polars DataFrame (self.data) for trial data, regardless
of whether the input is provided as a Polars DataFrame, dict, or list.</p>


<details class="it-provides-two-export-functionalities" open>
  <summary>It provides two export functionalities</summary>
  <ul>
<li>save_parquet(file_path): Saves the internal data as a Parquet file.</li>
</ul>
</details>        <p>Additionally, printing the Experiment instance (via <strong>str</strong>) shows a
summary and the head (first few rows) of the data.</p>







                  <details class="quote">
                    <summary>Source code in <code>pytestlab/experiments/experiments.py</code></summary>
                    <pre class="highlight"><code class="language-python">def __init__(self, name: str, description: str = "", notes: str = "") -&gt; None:
    self.name: str = name
    self.description: str = description
    self.notes: str = notes
    self.parameters: Dict[str, ExperimentParameter] = {}
    self.data: pl.DataFrame = pl.DataFrame()</code></pre>
                  </details>



  <div class="doc doc-children">





<h3 id="pytestlab.experiments.experiments.Experiment-attributes">Attributes</h3>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.experiments.Experiment.data" class="doc doc-heading">
            <code class="highlight language-python">data = pl.DataFrame()</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.experiments.Experiment.description" class="doc doc-heading">
            <code class="highlight language-python">description = description</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.experiments.Experiment.name" class="doc doc-heading">
            <code class="highlight language-python">name = name</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.experiments.Experiment.notes" class="doc doc-heading">
            <code class="highlight language-python">notes = notes</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.experiments.Experiment.parameters" class="doc doc-heading">
            <code class="highlight language-python">parameters = {}</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<h3 id="pytestlab.experiments.experiments.Experiment-functions">Functions</h3>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.experiments.Experiment.__iter__" class="doc doc-heading">
            <code class="highlight language-python">__iter__()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over each trial (row) as a dictionary.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/experiments.py</code></summary>
              <pre class="highlight"><code class="language-python">def __iter__(self) -&gt; Iterator[Dict[str, Any]]:
    """Iterate over each trial (row) as a dictionary."""
    for row in self.data.to_dicts():
        yield row</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.experiments.Experiment.__len__" class="doc doc-heading">
            <code class="highlight language-python">__len__()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Return the number of trials.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/experiments.py</code></summary>
              <pre class="highlight"><code class="language-python">def __len__(self) -&gt; int:
    """Return the number of trials."""
    return self.data.height</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.experiments.Experiment.__str__" class="doc doc-heading">
            <code class="highlight language-python">__str__()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Return a string representation of the experiment.</p>
<p>This includes a summary of the experiment details and prints the first 5 rows
of the trial data (the head).</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/experiments.py</code></summary>
              <pre class="highlight"><code class="language-python">def __str__(self) -&gt; str:
    """
    Return a string representation of the experiment.

    This includes a summary of the experiment details and prints the first 5 rows
    of the trial data (the head).
    """
    param_str = ", ".join(str(param) for param in self.parameters.values())
    head_data: Union[pl.DataFrame, str]
    if not self.data.is_empty():
        head_data = self.data.head(5)
    else:
        head_data = "No trial data available."

    return (f"Experiment: {self.name}\n"
            f"Description: {self.description}\n"
            f"Notes: {self.notes or 'No notes'}\n"
            f"Parameters: {param_str}\n"
            f"Trial Data (first 5 rows):\n{head_data}")</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.experiments.Experiment.add_parameter" class="doc doc-heading">
            <code class="highlight language-python">add_parameter(name, units, notes='')</code>

</h4>


    <div class="doc doc-contents ">

        <p>Add a new parameter to the experiment.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Name of the parameter.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>units</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Units for the parameter.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>notes</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Additional notes.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/experiments.py</code></summary>
              <pre class="highlight"><code class="language-python">def add_parameter(self, name: str, units: str, notes: str = "") -&gt; None:
    """
    Add a new parameter to the experiment.

    Args:
        name (str): Name of the parameter.
        units (str): Units for the parameter.
        notes (str, optional): Additional notes.
    """
    self.parameters[name] = ExperimentParameter(name, units, notes)</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.experiments.Experiment.add_trial" class="doc doc-heading">
            <code class="highlight language-python">add_trial(measurement_result, **parameter_values)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Add a new trial to the experiment.</p>
<p>Accepts measurement data in various formats (list, dict, Polars DataFrame, or MeasurementResult)
and converts it into a Polars DataFrame if needed. Additional parameter values
are added as new columns.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>measurement_result</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The measurement data.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="polars.DataFrame">DataFrame</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>], <span title="typing.List">List</span>[<span title="typing.Any">Any</span>], <a class="autorefs autorefs-internal" title="pytestlab.experiments.results.MeasurementResult(values, instrument, units, measurement_type, timestamp=None, envelope=None, sampling_rate=None, **kwargs)" href="#pytestlab.experiments.results.MeasurementResult">MeasurementResult</a>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**parameter_values</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Additional parameters to include with this trial.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Any">Any</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="ValueError">ValueError</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If the conversion to a Polars DataFrame fails or if a
        provided parameter is not defined.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/experiments.py</code></summary>
              <pre class="highlight"><code class="language-python">def add_trial(self, measurement_result: Union[pl.DataFrame, Dict[str, Any], List[Any], 'MeasurementResult'], **parameter_values: Any) -&gt; None:
    """
    Add a new trial to the experiment.

    Accepts measurement data in various formats (list, dict, Polars DataFrame, or MeasurementResult)
    and converts it into a Polars DataFrame if needed. Additional parameter values
    are added as new columns.

    Args:
        measurement_result (Union[pl.DataFrame, Dict[str, Any], List[Any], MeasurementResult]): The measurement data.
        **parameter_values: Additional parameters to include with this trial.

    Raises:
        ValueError: If the conversion to a Polars DataFrame fails or if a
                    provided parameter is not defined.
    """
    trial_df: pl.DataFrame

    # Special handling for MeasurementResult objects
    if hasattr(measurement_result, 'values') and hasattr(measurement_result, 'to_dict'):
        # If it's a MeasurementResult, extract its values
        if isinstance(measurement_result.values, pl.DataFrame):
            trial_df = measurement_result.values
        else:
            # Convert to dict and then to DataFrame
            try:
                trial_df = pl.DataFrame(measurement_result.to_dict(), strict=False)
            except Exception as e:
                raise ValueError(f"Failed to convert MeasurementResult to DataFrame: {e}") from e
    elif not isinstance(measurement_result, pl.DataFrame):
        try:
            trial_df = pl.DataFrame(measurement_result, strict=False)
        except Exception as e:
            raise ValueError(f"Failed to convert measurement_result to a Polars DataFrame: {e}") from e
    else:
        trial_df = measurement_result

    for param_name, value in parameter_values.items():
        if param_name not in self.parameters:
            raise ValueError(f"Parameter '{param_name}' is not defined in the experiment. Add it first using add_parameter().")
        trial_df = trial_df.with_columns(pl.lit(value).alias(param_name))

    if self.data.is_empty():
        self.data = trial_df
    else:
        try:
            self.data = self.data.vstack(trial_df)
        except Exception as e: 
            raise ValueError(f"Failed to stack new trial data. Check for schema compatibility. Error: {e}") from e</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.experiments.Experiment.list_trials" class="doc doc-heading">
            <code class="highlight language-python">list_trials()</code>

</h4>


    <div class="doc doc-contents ">

        <p>Print the full trials DataFrame.</p>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/experiments.py</code></summary>
              <pre class="highlight"><code class="language-python">def list_trials(self) -&gt; None:
    """Print the full trials DataFrame."""
    print(self.data)</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.experiments.Experiment.save_parquet" class="doc doc-heading">
            <code class="highlight language-python">save_parquet(file_path)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Save the internal Polars DataFrame as a Parquet file.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The file path (including filename) where the Parquet file will be saved.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/experiments.py</code></summary>
              <pre class="highlight"><code class="language-python">def save_parquet(self, file_path: str) -&gt; None:
    """
    Save the internal Polars DataFrame as a Parquet file.

    Args:
        file_path (str): The file path (including filename) where the Parquet file will be saved.
    """
    self.data.write_parquet(file_path)
    print(f"Data saved to Parquet file at: {file_path}")</code></pre>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="pytestlab.experiments.sweep" class="doc doc-heading">
            <code>pytestlab.experiments.sweep</code>


</h2>

    <div class="doc doc-contents first">









  <div class="doc doc-children">





<h3 id="pytestlab.experiments.sweep-attributes">Attributes</h3>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.sweep.R" class="doc doc-heading">
            <code class="highlight language-python">R = TypeVar('R')</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.sweep.T" class="doc doc-heading">
            <code class="highlight language-python">T = TypeVar('T')</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.sweep.grid_sweep_impl" class="doc doc-heading">
            <code class="highlight language-python">grid_sweep_impl = grid_sweep</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.sweep.gwass_impl" class="doc doc-heading">
            <code class="highlight language-python">gwass_impl = gwass</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pytestlab.experiments.sweep.monte_carlo_sweep_impl" class="doc doc-heading">
            <code class="highlight language-python">monte_carlo_sweep_impl = monte_carlo_sweep</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>
<h3 id="pytestlab.experiments.sweep-classes">Classes</h3>

<div class="doc doc-object doc-class">



<h4 id="pytestlab.experiments.sweep.ParameterSpace" class="doc doc-heading">
              <code class="highlight language-python">ParameterSpace(ranges='auto', names=None, constraint=None)</code>

</h4>


    <div class="doc doc-contents ">


        <p>Represents a parameter space for sweep operations.</p>
<p>This class helps define and manage parameter spaces for various sweep strategies,
including parameter ranges, constraints, and integration with MeasurementSession.</p>

        <p>Initialize a parameter space.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ranges</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Parameter ranges in one of these formats:
- List of (min, max) tuples: [(min1, max1), (min2, max2), ...]
- Dict of {name: (min, max)}: {"x": (0, 10), "y": (-5, 5), ...}
- "auto" to extract from MeasurementSession</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>[<span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>]], <span title="str">str</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>]]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;auto&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>names</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Parameter names (required if ranges is a list of tuples)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>constraint</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional function that takes a dict of parameter values
        and returns True if the combination is valid</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Callable">Callable</span>[[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="float">float</span>]], <span title="bool">bool</span>]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>







                  <details class="quote">
                    <summary>Source code in <code>pytestlab/experiments/sweep.py</code></summary>
                    <pre class="highlight"><code class="language-python">def __init__(self,
             ranges: Union[List[Tuple[float, float]], str, Dict[str, Tuple[float, float]]] = "auto",
             names: Optional[List[str]] = None,
             constraint: Optional[Callable[[Dict[str, float]], bool]] = None):
    """
    Initialize a parameter space.

    Args:
        ranges: Parameter ranges in one of these formats:
            - List of (min, max) tuples: [(min1, max1), (min2, max2), ...]
            - Dict of {name: (min, max)}: {"x": (0, 10), "y": (-5, 5), ...}
            - "auto" to extract from MeasurementSession
        names: Parameter names (required if ranges is a list of tuples)
        constraint: Optional function that takes a dict of parameter values
                    and returns True if the combination is valid
    """
    self.ranges = ranges
    self.names = names or []
    self.constraint = constraint
    self._session = None

    # Validate ranges and names
    if isinstance(ranges, list) and names and len(ranges) != len(names):
        raise ValueError("Number of ranges must match number of parameter names")

    # Convert dict to list format if provided as dict
    if isinstance(ranges, dict):
        self.names = list(ranges.keys())
        self.ranges = [ranges[name] for name in self.names]</code></pre>
                  </details>



  <div class="doc doc-children">





<h5 id="pytestlab.experiments.sweep.ParameterSpace-attributes">Attributes</h5>

<div class="doc doc-object doc-attribute">



<h6 id="pytestlab.experiments.sweep.ParameterSpace.constraint" class="doc doc-heading">
            <code class="highlight language-python">constraint = constraint</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="pytestlab.experiments.sweep.ParameterSpace.names" class="doc doc-heading">
            <code class="highlight language-python">names = names or []</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="pytestlab.experiments.sweep.ParameterSpace.ranges" class="doc doc-heading">
            <code class="highlight language-python">ranges = ranges</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

    </div>

</div>

<h5 id="pytestlab.experiments.sweep.ParameterSpace-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="pytestlab.experiments.sweep.ParameterSpace.from_session" class="doc doc-heading">
            <code class="highlight language-python">from_session(session, constraint=None)</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Create a ParameterSpace from a MeasurementSession.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>session</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A MeasurementSession with defined parameters</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>constraint</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional constraint function</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ParameterSpace</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A configured parameter space</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/sweep.py</code></summary>
              <pre class="highlight"><code class="language-python">@classmethod
def from_session(cls, session, constraint=None):
    """
    Create a ParameterSpace from a MeasurementSession.

    Args:
        session: A MeasurementSession with defined parameters
        constraint: Optional constraint function

    Returns:
        ParameterSpace: A configured parameter space
    """
    space = cls("auto", constraint=constraint)
    space._session = session

    # Extract parameter information
    param_names = []
    param_ranges = []

    for name, param in session._parameters.items():
        param_names.append(name)
        values = param.values

        # Calculate range from values
        min_val = min(values)
        max_val = max(values)
        param_ranges.append((min_val, max_val))

    space.names = param_names
    space.ranges = param_ranges

    return space</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="pytestlab.experiments.sweep.ParameterSpace.get_parameters" class="doc doc-heading">
            <code class="highlight language-python">get_parameters()</code>

</h6>


    <div class="doc doc-contents ">

        <p>Get parameter information.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tuple</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>(names, ranges) where:
- names is a list of parameter names
- ranges is a list of (min, max) tuples</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/sweep.py</code></summary>
              <pre class="highlight"><code class="language-python">def get_parameters(self):
    """
    Get parameter information.

    Returns:
        tuple: (names, ranges) where:
            - names is a list of parameter names
            - ranges is a list of (min, max) tuples
    """
    # If auto, extract from session
    if self.ranges == "auto":
        if not self._session:
            raise ValueError("'auto' ranges require a MeasurementSession")
        return ParameterSpace.from_session(self._session, self.constraint).get_parameters()

    return self.names, self.ranges</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="pytestlab.experiments.sweep.ParameterSpace.is_valid" class="doc doc-heading">
            <code class="highlight language-python">is_valid(param_values)</code>

</h6>


    <div class="doc doc-contents ">

        <p>Check if a parameter combination is valid according to the constraint.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>param_values</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Parameter values as a list or dict</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>[<span title="float">float</span>], <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="float">float</span>]]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>bool</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>True if valid, False otherwise</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="bool">bool</span></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/sweep.py</code></summary>
              <pre class="highlight"><code class="language-python">def is_valid(self, param_values: Union[List[float], Dict[str, float]]) -&gt; bool:
    """
    Check if a parameter combination is valid according to the constraint.

    Args:
        param_values: Parameter values as a list or dict

    Returns:
        bool: True if valid, False otherwise
    """
    if not self.constraint:
        return True

    # Convert list to dict if needed
    if isinstance(param_values, list):
        param_dict = dict(zip(self.names, param_values))
    else:
        param_dict = param_values

    return self.constraint(param_dict)</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="pytestlab.experiments.sweep.ParameterSpace.wrap_function" class="doc doc-heading">
            <code class="highlight language-python">wrap_function(func)</code>

</h6>


    <div class="doc doc-contents ">

        <p>Wrap a function to handle parameter passing and session integration.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The measurement function to wrap</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Callable">Callable</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>Callable</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A wrapped function that handles parameters appropriately</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/sweep.py</code></summary>
              <pre class="highlight"><code class="language-python">def wrap_function(self, func: Callable):
    """
    Wrap a function to handle parameter passing and session integration.

    Args:
        func: The measurement function to wrap

    Returns:
        Callable: A wrapped function that handles parameters appropriately
    """
    # Get parameter information
    names, _ = self.get_parameters()

    # Define wrapper function for session usage
    def wrapped_func(*params):
        # Convert positional params to dict
        param_dict = dict(zip(names, params))

        # Apply constraint if any
        if self.constraint and not self.constraint(param_dict):
            # Return a default value for invalid combinations
            return float('nan')

        # Call the original function with named parameters
        return func(**param_dict)

    return wrapped_func</code></pre>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="pytestlab.experiments.sweep.Sweep" class="doc doc-heading">
            <code>Sweep</code>


</h4>


    <div class="doc doc-contents ">


        <p>Dummy Sweep class for documentation compatibility.
This is not used in runtime code, but allows mkdocstrings to resolve
'pytestlab.experiments.Sweep' for API docs.</p>








    </div>

</div>
<h3 id="pytestlab.experiments.sweep-functions">Functions</h3>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.sweep.f_evaluate" class="doc doc-heading">
            <code class="highlight language-python">f_evaluate(params, f)</code>

</h4>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/sweep.py</code></summary>
              <pre class="highlight"><code class="language-python">def f_evaluate(params: Tuple[Any, ...], f: Callable[..., Any]) -&gt; Any:
    return f(*params)</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.sweep.grid_sweep" class="doc doc-heading">
            <code class="highlight language-python">grid_sweep(param_space=None, points=10)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Apply a grid sweep to a measurement function.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>param_space</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Parameter space definition, one of:
- ParameterSpace object
- List of (min, max) tuples
- Dict of {name: (min, max)}
- "auto" to extract from MeasurementSession</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>points</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Points per dimension, either:
- Single integer (same for all dimensions)
- List of integers (one per dimension)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>10</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>Callable</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A decorator that applies a grid sweep</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>@grid_sweep({"voltage": (0, 10), "current": (0, 1)}, 20)
def measure(voltage, current):
    # Measurement code
    return result</p>
<h5 id="pytestlab.experiments.sweep.grid_sweep--or-with-auto-parameter-extraction-from-session">Or with auto parameter extraction from session</h5>
<p>@session.acquire
@grid_sweep(points=15)
async def measure(voltage, current, instrument):
    # Measurement code
    return result</p>
<h5 id="pytestlab.experiments.sweep.grid_sweep--with-constraint">With constraint</h5>
<p>def valid_region(params):
    return params["voltage"] &gt; 2 * params["current"]</p>
<p>@grid_sweep(
    ParameterSpace({"voltage": (0, 10), "current": (0, 1)}, constraint=valid_region),
    points=15
)
def measure(voltage, current):
    # Measurement code
    return result</p>
</details>

            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/sweep.py</code></summary>
              <pre class="highlight"><code class="language-python">def grid_sweep(param_space=None, points=10):
    """
    Apply a grid sweep to a measurement function.

    Args:
        param_space: Parameter space definition, one of:
            - ParameterSpace object
            - List of (min, max) tuples
            - Dict of {name: (min, max)}
            - "auto" to extract from MeasurementSession
        points: Points per dimension, either:
            - Single integer (same for all dimensions)
            - List of integers (one per dimension)

    Returns:
        Callable: A decorator that applies a grid sweep

    Example:
        @grid_sweep({"voltage": (0, 10), "current": (0, 1)}, 20)
        def measure(voltage, current):
            # Measurement code
            return result

        # Or with auto parameter extraction from session
        @session.acquire
        @grid_sweep(points=15)
        async def measure(voltage, current, instrument):
            # Measurement code
            return result

        # With constraint
        def valid_region(params):
            return params["voltage"] &gt; 2 * params["current"]

        @grid_sweep(
            ParameterSpace({"voltage": (0, 10), "current": (0, 1)}, constraint=valid_region),
            points=15
        )
        def measure(voltage, current):
            # Measurement code
            return result
    """
    # Handle different param_space types
    if param_space is None:
        param_space = "auto"

    if not isinstance(param_space, ParameterSpace):
        param_space = ParameterSpace(param_space)

    def decorator(func):
        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            # Handle session as first argument
            if args and hasattr(args[0], '_parameters') and hasattr(args[0], 'acquire'):
                session = args[0]
                local_space = ParameterSpace.from_session(session, param_space.constraint)

                # Create measurement function that closes over the original func
                def measure_func(**params):
                    return func(**params, **kwargs)

                # Get parameters and run grid sweep
                names, ranges = local_space.get_parameters()
                wrapped_func = local_space.wrap_function(measure_func)

                # Run the original grid_sweep function
                results = grid_sweep_impl(wrapped_func, ranges, points)

                # Format results if needed
                return results
            else:
                # Standard usage without session
                if param_space.ranges == "auto":
                    raise ValueError("'auto' parameter space requires a MeasurementSession")

                # Get parameters and run grid sweep
                names, ranges = param_space.get_parameters()
                wrapped_func = param_space.wrap_function(func)

                # Run the original grid_sweep function
                return grid_sweep_impl(wrapped_func, ranges, points)
        return wrapper
    return decorator</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.sweep.gwass" class="doc doc-heading">
            <code class="highlight language-python">gwass(param_space=None, budget=100, initial_percentage=0.1)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Apply gradient-weighted adaptive stochastic sampling to a measurement function.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>param_space</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Parameter space definition, one of:
- ParameterSpace object
- List of (min, max) tuples
- Dict of {name: (min, max)}
- "auto" to extract from MeasurementSession</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>budget</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Total number of function evaluations allowed</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>100</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>initial_percentage</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Percentage of budget to use for initial grid</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>0.1</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>Callable</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A decorator that applies GWASS</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>@gwass({"voltage": (0, 10), "current": (0, 1)}, budget=200)
def measure(voltage, current):
    # Measurement code
    return result</p>
<h5 id="pytestlab.experiments.sweep.gwass--or-with-constraint">Or with constraint</h5>
<p>def valid_region(params):
    # Only accept points where voltage &gt; 2*current
    return params["voltage"] &gt; 2 * params["current"]</p>
<p>@gwass(
    ParameterSpace({"voltage": (0, 10), "current": (0, 1)}, constraint=valid_region),
    budget=150
)
def measure(voltage, current):
    # Measurement code
    return result</p>
</details>

            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/sweep.py</code></summary>
              <pre class="highlight"><code class="language-python">def gwass(param_space=None, budget=100, initial_percentage=0.1):
    """
    Apply gradient-weighted adaptive stochastic sampling to a measurement function.

    Args:
        param_space: Parameter space definition, one of:
            - ParameterSpace object
            - List of (min, max) tuples
            - Dict of {name: (min, max)}
            - "auto" to extract from MeasurementSession
        budget: Total number of function evaluations allowed
        initial_percentage: Percentage of budget to use for initial grid

    Returns:
        Callable: A decorator that applies GWASS

    Example:
        @gwass({"voltage": (0, 10), "current": (0, 1)}, budget=200)
        def measure(voltage, current):
            # Measurement code
            return result

        # Or with constraint
        def valid_region(params):
            # Only accept points where voltage &gt; 2*current
            return params["voltage"] &gt; 2 * params["current"]

        @gwass(
            ParameterSpace({"voltage": (0, 10), "current": (0, 1)}, constraint=valid_region),
            budget=150
        )
        def measure(voltage, current):
            # Measurement code
            return result
    """
    # Handle different param_space types
    if param_space is None:
        param_space = "auto"

    if not isinstance(param_space, ParameterSpace):
        param_space = ParameterSpace(param_space)

    def decorator(func):
        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            # Handle session as first argument
            if args and hasattr(args[0], '_parameters') and hasattr(args[0], 'acquire'):
                session = args[0]
                local_space = ParameterSpace.from_session(session, param_space.constraint)

                # Create measurement function that closes over the original func
                def measure_func(**params):
                    return func(**params, **kwargs)

                # Get parameters and run GWASS
                names, ranges = local_space.get_parameters()
                wrapped_func = local_space.wrap_function(measure_func)

                # Run the original GWASS function
                return gwass_impl(wrapped_func, ranges, budget, initial_percentage)
            else:
                # Standard usage without session
                if param_space.ranges == "auto":
                    raise ValueError("'auto' parameter space requires a MeasurementSession")

                # Get parameters and run GWASS
                names, ranges = param_space.get_parameters()
                wrapped_func = param_space.wrap_function(func)

                return gwass_impl(wrapped_func, ranges, budget, initial_percentage)
        return wrapper
    return decorator</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pytestlab.experiments.sweep.monte_carlo_sweep" class="doc doc-heading">
            <code class="highlight language-python">monte_carlo_sweep(param_space=None, samples=50)</code>

</h4>


    <div class="doc doc-contents ">

        <p>Apply a Monte Carlo sweep to a measurement function.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>param_space</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Parameter space definition, one of:
- ParameterSpace object
- List of (min, max) tuples
- Dict of {name: (min, max)}
- "auto" to extract from MeasurementSession</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>samples</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Number of samples, either:
- Single integer (total samples)
- List of integers (samples per dimension)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>50</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>Callable</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A decorator that applies a Monte Carlo sweep</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>@monte_carlo_sweep({"voltage": (0, 10), "current": (0, 1)}, 100)
def measure(voltage, current):
    # Measurement code
    return result</p>
<h5 id="pytestlab.experiments.sweep.monte_carlo_sweep--with-constraint-function">With constraint function</h5>
<p>def valid_region(params):
    return params["voltage"] &gt; 0.5 and params["current"] &lt; 0.8</p>
<p>@monte_carlo_sweep(
    ParameterSpace({"voltage": (0, 10), "current": (0, 1)}, constraint=valid_region),
    samples=200
)
def measure(voltage, current):
    # Measurement code
    return result</p>
</details>

            <details class="quote">
              <summary>Source code in <code>pytestlab/experiments/sweep.py</code></summary>
              <pre class="highlight"><code class="language-python">def monte_carlo_sweep(param_space=None, samples=50):
    """
    Apply a Monte Carlo sweep to a measurement function.

    Args:
        param_space: Parameter space definition, one of:
            - ParameterSpace object
            - List of (min, max) tuples
            - Dict of {name: (min, max)}
            - "auto" to extract from MeasurementSession
        samples: Number of samples, either:
            - Single integer (total samples)
            - List of integers (samples per dimension)

    Returns:
        Callable: A decorator that applies a Monte Carlo sweep

    Example:
        @monte_carlo_sweep({"voltage": (0, 10), "current": (0, 1)}, 100)
        def measure(voltage, current):
            # Measurement code
            return result

        # With constraint function
        def valid_region(params):
            return params["voltage"] &gt; 0.5 and params["current"] &lt; 0.8

        @monte_carlo_sweep(
            ParameterSpace({"voltage": (0, 10), "current": (0, 1)}, constraint=valid_region),
            samples=200
        )
        def measure(voltage, current):
            # Measurement code
            return result
    """
    # Handle different param_space types
    if param_space is None:
        param_space = "auto"

    if not isinstance(param_space, ParameterSpace):
        param_space = ParameterSpace(param_space)

    def decorator(func):
        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            # Handle session as first argument
            if args and hasattr(args[0], '_parameters') and hasattr(args[0], 'acquire'):
                session = args[0]
                local_space = ParameterSpace.from_session(session, param_space.constraint)

                # Create measurement function that closes over the original func
                def measure_func(**params):
                    return func(**params, **kwargs)

                # Get parameters and run Monte Carlo sweep
                names, ranges = local_space.get_parameters()
                wrapped_func = local_space.wrap_function(measure_func)

                # Convert samples to per-dimension if needed
                samples_list = samples
                if isinstance(samples, int):
                    # Equal distribution among parameters
                    samples_list = [int(samples**(1/len(ranges)))] * len(ranges)

                # Run the original Monte Carlo sweep function
                return monte_carlo_sweep_impl(wrapped_func, ranges, samples_list)
            else:
                # Standard usage without session
                if param_space.ranges == "auto":
                    raise ValueError("'auto' parameter space requires a MeasurementSession")

                # Get parameters and run Monte Carlo sweep
                names, ranges = param_space.get_parameters()
                wrapped_func = param_space.wrap_function(func)

                # Convert samples to per-dimension if needed
                samples_list = samples
                if isinstance(samples, int):
                    # Equal distribution among parameters
                    samples_list = [int(samples**(1/len(ranges)))] * len(ranges)

                return monte_carlo_sweep_impl(wrapped_func, ranges, samples_list)
        return wrapper
    return decorator</code></pre>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />
                            
                        </div>

                        <!-- Page Navigation (Previous/Next) -->
                        
                        <div class="page-nav">
                            
                                <a href="../measurements/" class="prev-link">
                                    <span class="nav-label">Previous</span>
                                    <span class="nav-title">Measurements</span>
                                </a>
                            

                            
                                <a href="../backends/" class="next-link">
                                    <span class="nav-label">Next</span>
                                    <span class="nav-title">Backends</span>
                                </a>
                            
                        </div>
                        
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-copyright">
                        <p>&copy; 2025 LABIIUM. All rights reserved.</p>
                        <p>PyTestLab is an open-source project.</p>
                    </div>

                    <div class="footer-links">
                        
                            <a href="https://github.com/pytestlab/pytestlab" target="_blank">GitHub</a>
                        
                        
                        <a href="../../changelog/">Changelog</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="../../js/theme.js"></script>

    <!-- Search and Enhanced functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Search Modal ---
            const searchButton = document.getElementById('searchButton');
            const searchModal = document.getElementById('searchModal');
            const searchClose = document.getElementById('searchClose');
            const searchInput = document.getElementById('searchInput');
            let searchIndex = null;

            // Load search index with better path resolution
            const searchPath = window.location.pathname.includes('/site/')
                ? '../search/search_index.json'
                : 'search/search_index.json';

            fetch(searchPath)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Search index not found');
                    }
                    return response.json();
                })
                .then(data => {
                    searchIndex = data;
                    console.log('Search index loaded successfully');
                })
                .catch((error) => {
                    console.log('Search index not found, trying alternative paths');
                    // Try alternative paths
                    const altPaths = ['../search/search_index.json', './search/search_index.json', '/search/search_index.json'];

                    altPaths.reduce((promise, path) => {
                        return promise.catch(() => {
                            return fetch(path).then(response => {
                                if (!response.ok) throw new Error('Not found');
                                return response.json();
                            }).then(data => {
                                searchIndex = data;
                                console.log('Search index loaded from:', path);
                            });
                        });
                    }, Promise.reject()).catch(() => {
                        console.log('Search functionality disabled - no search index found');
                    });
                });

            if (searchButton && searchModal && searchClose) {
                searchButton.addEventListener('click', function() {
                    searchModal.classList.add('active');
                    setTimeout(() => {
                        searchInput.focus();
                    }, 100);
                });

                searchClose.addEventListener('click', function() {
                    searchModal.classList.remove('active');
                });

                // Close on escape key
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && searchModal.classList.contains('active')) {
                        searchModal.classList.remove('active');
                    }
                });
            }

            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const query = this.value.trim().toLowerCase();
                    const searchResultsMeta = document.getElementById('searchResultsMeta');
                    const searchResults = document.getElementById('searchResults');

                    if (query.length > 1) {
                        searchResultsMeta.textContent = 'Searching...';
                        searchResults.innerHTML = '';

                        if (searchIndex) {
                            const results = performSearch(query, searchIndex);
                            displaySearchResults(results, searchResultsMeta, searchResults);
                        } else {
                            searchResultsMeta.textContent = 'Loading search index...';
                            searchResults.innerHTML = '<div class="search-result-item"><p style="color: var(--lab-aqua); padding: 1rem;">Search index is loading. If this persists, make sure the site has been built with <code>mkdocs build</code>.</p></div>';
                        }
                    } else {
                        searchResultsMeta.textContent = 'Type to start searching';
                        searchResults.innerHTML = '';
                    }
                });
            }

            function performSearch(query, index) {
                const results = [];
                // Handle different search index formats
                const docs = index.docs || index.articles || [];

                docs.forEach((doc, i) => {
                    const title = (doc.title || '').toLowerCase();
                    const text = (doc.text || doc.content || '').toLowerCase();
                    const location = doc.location || doc.url || '#';

                    if (title.includes(query) || text.includes(query)) {
                        const titleIndex = title.indexOf(query);
                        const textIndex = text.indexOf(query);
                        const score = (titleIndex >= 0 ? 10 : 0) + (textIndex >= 0 ? 1 : 0);

                        results.push({
                            title: doc.title || 'Untitled',
                            location: location,
                            text: text || 'No description available',
                            score: score
                        });
                    }
                });

                return results.sort((a, b) => b.score - a.score).slice(0, 10);
            }

            function displaySearchResults(results, metaElement, resultsElement) {
                if (results.length > 0) {
                    metaElement.textContent = `${results.length} result${results.length > 1 ? 's' : ''} found`;

                    resultsElement.innerHTML = results.map(result => `
                        <div class="search-result-item">
                            <a href="${result.location}" class="search-result-link">
                                <div class="search-result-title">${result.title}</div>
                                <div class="search-result-text">${result.text.substring(0, 150)}...</div>
                            </a>
                        </div>
                    `).join('');
                } else {
                    metaElement.textContent = 'No results found';
                    resultsElement.innerHTML = '';
                }
            }

            // --- Enhanced Code Block Copy functionality ---
            const codeBlocks = document.querySelectorAll('pre');
            codeBlocks.forEach(block => {
                // Add copy button
                const copyButton = document.createElement('button');
                copyButton.className = 'copy-button';
                copyButton.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path></svg>Copy';
                copyButton.setAttribute('aria-label', 'Copy code to clipboard');

                copyButton.addEventListener('click', () => {
                    const code = block.querySelector('code')?.textContent || block.textContent;

                    navigator.clipboard.writeText(code).then(() => {
                        copyButton.classList.add('copied');
                        copyButton.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"></path></svg>Copied!';

                        setTimeout(() => {
                            copyButton.classList.remove('copied');
                            copyButton.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path></svg>Copy';
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy:', err);
                    });
                });

                block.appendChild(copyButton);

                // Add language indicator
                const language = block.querySelector('code')?.className.match(/language-(\w+)/)?.[1];
                if (language) {
                    const langBadge = document.createElement('div');
                    langBadge.className = 'lang-badge';

                    // Format language name to be more readable
                    const langMap = {
                        'py': 'Python',
                        'js': 'JavaScript',
                        'ts': 'TypeScript',
                        'html': 'HTML',
                        'css': 'CSS',
                        'yaml': 'YAML',
                        'json': 'JSON',
                        'bash': 'Shell',
                        'sh': 'Shell',
                        'sql': 'SQL',
                        'cpp': 'C++'
                    };

                    const displayLang = langMap[language] || language.charAt(0).toUpperCase() + language.slice(1);
                    langBadge.textContent = displayLang;
                    block.appendChild(langBadge);
                }
            });
        });
    </script>

    

    <!-- Extra scripts from plugins -->
    

    <!-- Prism.js for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>